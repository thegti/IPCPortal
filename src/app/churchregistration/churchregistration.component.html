<div class="horizontal-stepper-wrapper  myclass1">
    <h1 class="forhead">Church Registration</h1>
        <mat-horizontal-stepper class="mat-elevation-z4 myclass1" [linear]="true" #stepper>
       
           <mat-step [stepControl]="strpPrimary">
       
               <form fxLayout="column" [formGroup]="strpPrimary">
       
                   <ng-template matStepLabel>Primary Information</ng-template>
                   <br>
                   <!-- <div fxFlex="1 0 auto" fxLayout="column"> -->
                    <div fxFlex="1 0 auto" fxLayout="row">
                            <mat-form-field appearance="outline" fxFlex="100">
                                        <mat-label>Church ID</mat-label>
                                        <input matInput formControlName="churchID" required>
                                        <mat-error>Centre ID is required!</mat-error>
                            </mat-form-field>
                    </div>
                   <div fxFlex="1 0 auto" fxLayout="row">
                    <mat-form-field appearance="outline" fxFlex="100">
                        <mat-label>Name</mat-label>
                        <input matInput formControlName="txtName" required>
                    <mat-icon matSuffix class="disabled-text">account_circle</mat-icon> 
                        <mat-error>Name is required!</mat-error>
                  </mat-form-field>
                  <mat-form-field appearance="outline" fxFlex="100" class="for2field">
                        <mat-label>Date Of Registration</mat-label>
                        <input matInput type="date" formControlName="txtDateReg" required>
                        <!-- <input matInput [matDatepicker]="picker"
                         placeholder="MM/DD/YYYY" 
                         pattern="/^(0?[1-9]|1[0-2])\/(0?[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/s"
                         formControlName="dateofreg"   required>
                        <mat-datepicker-toggle matSuffix #test [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker ></mat-datepicker> -->
                        <mat-error>
                            <span *ngIf="strpPrimary.value.txtDateReg==''" > Password is required!</span>
                            <span *ngIf="strpPrimary.value.txtDateReg!='' && strpPrimary.controls.txtDateReg['status']=='INVALID'" >Invalid Date</span> 
                         </mat-error>
                      </mat-form-field>
                     </div>
                     <div fxFlex="1 0 auto" fxLayout="row">
                          <mat-form-field appearance="outline" fxFlex="100">
                              <mat-label>Mobile No.</mat-label>
                             <input matInput formControlName="txtMobile" >
               
                              <mat-error>
                                <span *ngIf="strpPrimary.value.txtMobile==''" > Mobile Number is required!</span>
                                <span *ngIf="strpPrimary.value.txtMobile!='' && strpPrimary.controls.txtMobile['status']=='INVALID'" >Invalid Mobile Number</span>
                              </mat-error>
                          </mat-form-field>
                          <mat-form-field appearance="outline" fxFlex="100" class="for2field">
                                <mat-label>Email</mat-label>
                               <input matInput formControlName="txtEmail" > 
                               <mat-error>Invalid email</mat-error>
                          </mat-form-field>
                     </div>
                <div class="forlabel formakingdynamic"><b class="labeldynamic">Address:</b></div>  
                 <!-- <div formArrayName="address">
                   <div *ngFor="let item of getAddress.controls; let pointIndex=index" [formGroupName]="pointIndex"> -->
                      <div fxLayout="column">
                     <div fxFlex="1 0 auto" fxLayout="row">
                           <mat-form-field  appearance="outline" fxFlex="100">
                                   <mat-label>Location/Street Address</mat-label>
                                   <input matInput formControlName="txtStreet">
                                   <mat-error>Street address is required!</mat-error>
                           </mat-form-field>
                     </div>
                     <div fxFlex="1 0 auto" fxLayout="row">     
                           <mat-form-field  appearance="outline" fxFlex="100">
                                   <mat-label>City</mat-label>
                                   <input matInput formControlName="txtCity">
                                   <mat-error>City is required!</mat-error>
                           </mat-form-field>
                           <mat-form-field  appearance="outline" fxFlex="100"  class="for2field">
                                   <mat-label>State</mat-label>
                                   <input matInput formControlName="txtState">
                                   <mat-error>State is required!</mat-error>
                           </mat-form-field>
                          
                     </div> 
                     <div fxFlex="1 0 auto" fxLayout="row">
                        <mat-form-field appearance="outline" fxFlex="100">
                            <mat-label>Select Country</mat-label>
                            <mat-select formControlName="ddlCountry"  #singleSelect (selectionChange)="onCountrySelect()">
                                <ngx-mat-select-search [formControl]="countryFilterCtrl" [placeholderLabel]="'Search Country...'"  [noEntriesFoundLabel]="'No matching Country found'"></ngx-mat-select-search>
                                <mat-option *ngFor="let country of filteredCount | async" [value]="country['CNT_PK']">
                                  {{country['CNT_NAME']}}
                                </mat-option>
                              </mat-select>
                          </mat-form-field>
                          <mat-form-field appearance="outline" fxFlex="100" class="for2field">
                            <mat-label>Select Region</mat-label>
                            <mat-select formControlName="ddlRegion"  (click)="checkcountryselection()"  (selectionChange)="onRegionSelect()">
                                <ngx-mat-select-search [formControl]="regionFilterCtrl" [placeholderLabel]="'Search Region...'"  [noEntriesFoundLabel]="'No matching Region found'"></ngx-mat-select-search>
                                <mat-option *ngFor="let region of filteredRegion | async" [value]="region['RGN_PK']">
                                  {{region['RGN_NAME']}}
                                </mat-option>
                              </mat-select>
                            <mat-error>Region is required</mat-error>
                          </mat-form-field>
                          <mat-form-field appearance="outline" fxFlex="100" class="for2field">
                            <mat-label>Select Centre</mat-label>
                            <mat-select formControlName="ddlCentre" (click)="checkCntryandRegselection()">
                                <ngx-mat-select-search [formControl]="centreFilterCtrl" [placeholderLabel]="'Search Centre...'"  [noEntriesFoundLabel]="'No matching Centre found'"></ngx-mat-select-search>
                                <mat-option *ngFor="let centre of filteredCentre | async" [value]="centre['CTR_PK']">
                                  {{centre['CTR_NAME']}}
                                </mat-option>
                              </mat-select>
                    </mat-form-field>
                     </div>
                   </div>      
                     <!-- </div>
               </div> -->
              
                  <div fxLayout="row" fxLayoutAlign="center center">
               <button mat-raised-button matStepperNext type="button" [disabled]="strpPrimary.invalid" color="accent">
                   Next
               </button>
               <button mat-raised-button  (click)="goBack()" class="forCancel"  color="accent">
                Cancel
              </button>
               </div>
               </form>
       
           </mat-step>
       
           <mat-step [stepControl]="stprSecondary">
       
               <form fxLayout="column" [formGroup]="stprSecondary">
       
                   <ng-template matStepLabel>Assigned Minister(s)</ng-template>
             
                   <div fxLayout="row" fxLayoutAlign="center center">
                       <button class="mr-8" mat-raised-button matStepperPrevious type="button" color="accent">
                           Previous
                       </button>
                       <button mat-raised-button matStepperNext type="button" color="accent">
                           Next
                       </button>
                       <button mat-raised-button  (click)="goBack()" class="forCancel"  color="accent">
                        Cancel
                      </button>
                   </div>
                   </form>
       
           </mat-step>
       
           <mat-step [stepControl]="stprTeritary">
       
               <form fxLayout="column" [formGroup]="stprTeritary">
       
                   <ng-template matStepLabel>Church Council Executives</ng-template>
                    <div fxFlex="1 0 auto" fxLayout="row">
                       
                         <mat-form-field appearance="outline" fxFlex="100">
                            <mat-label>Select President</mat-label>
                            <mat-select formControlName="president"  #singleSelect>
                              <ngx-mat-select-search [formControl]="presidentFilterCtrl" [placeholderLabel]="'Search President...'"  [noEntriesFoundLabel]="'No matching President found'"></ngx-mat-select-search>
                              <mat-option *ngFor="let member of filteredpresident | async" [value]="member['MMM_PK']">
                                {{member['MMM_NAME_TEXT']  + ' ' + member['MMM_NAME2'] + ' ' + member['MMM_NAME3'] }}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                           <mat-form-field appearance="outline" fxFlex="100" class="for2field">
                            <mat-label>Select VicePresident</mat-label>
                            <mat-select formControlName="vicpres1">
                              <ngx-mat-select-search [formControl]="vicpres1FilterCtrl" [placeholderLabel]="'Search VicePresident...'"  [noEntriesFoundLabel]="'No matching VicePresident found'"></ngx-mat-select-search>
                              <mat-option *ngFor="let member of filteredVicepres1 | async" [value]="member['MMM_PK']">
                                {{member['MMM_NAME_TEXT']  + ' ' + member['MMM_NAME2'] + ' ' + member['MMM_NAME3'] }}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                         </div>
                         <div fxFlex="1 0 auto" fxLayout="row">
                         <mat-form-field appearance="outline" fxFlex="100">
                                <mat-label>Select VicePresident</mat-label>
                                <mat-select formControlName="vicpres2">
                                  <ngx-mat-select-search [formControl]="vicpres2Ctrl" [placeholderLabel]="'Search VicePresident...'"  [noEntriesFoundLabel]="'No matching VicePresident found'"></ngx-mat-select-search>
                                  <mat-option *ngFor="let member of filteredVicepres2 | async" [value]="member['MMM_PK']">
                                    {{member['MMM_NAME_TEXT']  + ' ' + member['MMM_NAME2'] + ' ' + member['MMM_NAME3'] }}
                                  </mat-option>
                                </mat-select>
                        </mat-form-field>
                        <mat-form-field appearance="outline" fxFlex="100" class="for2field">
                                <mat-label>Select Secretary</mat-label>
                                <mat-select formControlName="secretary">
                                  <ngx-mat-select-search [formControl]="secretaryCtrl"  [placeholderLabel]="'Search Secretary...'"  [noEntriesFoundLabel]="'No matching Secretary found'"></ngx-mat-select-search>
                                  <mat-option *ngFor="let member of filteredSecretary | async" [value]="member['MMM_PK']">
                                    {{member['MMM_NAME_TEXT']  + ' ' + member['MMM_NAME2'] + ' ' + member['MMM_NAME3'] }}
                                  </mat-option>
                                </mat-select>
                          </mat-form-field>
                          </div>
                         <div fxFlex="1 0 auto" fxLayout="row"> 
                                <mat-form-field appearance="outline" fxFlex="100">
                                        <mat-label>Select Joint Secretary</mat-label>
                                        <mat-select formControlName="jointsecr1">
                                          <ngx-mat-select-search [formControl]="joinsecr1Ctrl" [placeholderLabel]="'Search Joint Secretary...'"  [noEntriesFoundLabel]="'No matching Joint Secretary found'"></ngx-mat-select-search>
                                          <mat-option *ngFor="let member of filteredJointsec1 | async" [value]="member['MMM_PK']">
                                            {{member['MMM_NAME_TEXT']  + ' ' + member['MMM_NAME2'] + ' ' + member['MMM_NAME3'] }}
                                          </mat-option>
                                        </mat-select>
                                </mat-form-field>
                                <mat-form-field appearance="outline" fxFlex="100" class="for2field">
                                        <mat-label>Select Joint Secretary</mat-label>
                                        <mat-select formControlName="jointsecr2">
                                          <ngx-mat-select-search [formControl]="joinsecr2Ctrl"  [placeholderLabel]="'SearchJoint Secretary...'"  [noEntriesFoundLabel]="'No matching Joint Secretary found'"></ngx-mat-select-search>
                                          <mat-option *ngFor="let member of filteredJointsec2 | async" [value]="member['MMM_PK']">
                                            {{member['MMM_NAME_TEXT']  + ' ' + member['MMM_NAME2'] + ' ' + member['MMM_NAME3'] }}
                                          </mat-option>
                                        </mat-select>
                                  </mat-form-field>
                        </div>
                        <div fxFlex="1 0 auto" fxLayout="row"> 
                                <mat-form-field appearance="outline" fxFlex="100">
                                        <mat-label>Select Treasurer</mat-label>
                                        <mat-select formControlName="treasurer">
                                          <ngx-mat-select-search [formControl]="treasurerCtrl"  [placeholderLabel]="'SearchJoint Treasurer...'"  [noEntriesFoundLabel]="'No matching Joint treasurer found'"></ngx-mat-select-search>
                                          <mat-option *ngFor="let member of filteredTreasurer | async" [value]="member['MMM_PK']">
                                            {{member['MMM_NAME_TEXT']  + ' ' + member['MMM_NAME2'] + ' ' + member['MMM_NAME3'] }}
                                          </mat-option>
                                        </mat-select>
                                  </mat-form-field>
                                  <mat-form-field appearance="outline" fxFlex="100" class="for2field">
                                        <mat-label>Council Elected Date</mat-label>
                                        <input matInput type="date" formControlName="councilelecteddate">
                                </mat-form-field>
                                
                        </div>
                       <div fxFlex="1 0 auto" fxLayout="row">
                           <mat-form-field appearance="outline" fxFlex="100">
                                   <mat-label>Council Begin Date</mat-label>
                                   <input matInput type="date" formControlName="councilbegindate">
                           </mat-form-field>
                           <mat-form-field appearance="outline" fxFlex="100" class="for2field">
                                   <mat-label>Council Expiry Date</mat-label>
                                   <input matInput type="date" formControlName="councilexpirydate">
                           </mat-form-field>
                   </div>   
       
                   <div fxLayout="row" fxLayoutAlign="center center">
                       <button class="mr-8" mat-raised-button matStepperPrevious type="button" color="primary">
                           Previous
                       </button>
                       <button mat-raised-button  *ngIf="isView" matStepperNext type="button" color="accent">
                            Next
                       </button>
                       <button mat-raised-button *ngIf="!isView"  [disabled]="strpPrimary.invalid || stprSecondary.invalid || stprTeritary.invalid" (click)="register()"  color="accent">
                          Register
                       </button>
                       <button mat-raised-button  (click)="goBack()" class="forCancel"  color="accent">
                        Cancel
                      </button>
                   </div>
       
               </form>
       
           </mat-step> 
           <mat-step *ngIf="isView" [stepControl]="horizontalStepperStep4">
                <ng-template matStepLabel>Council Details</ng-template>
                <app-council-details></app-council-details>
                <div fxLayout="row" fxLayoutAlign="center center">
                <button class="mr-8" mat-raised-button matStepperPrevious type="button" color="primary">
                    Previous
                </button>
                <button mat-raised-button  (click)="goBack()" class="forCancel"  color="accent">
                        Cancel
                      </button> 
                </div>        
             </mat-step>   
         </mat-horizontal-stepper>  
       
       </div>  
       <button mat-icon-button class="warn mat-elevation-z2 theme-options-button"
       (click)="toggleSidebarOpen('themeOptionsPanel')">
       <mat-icon>settings</mat-icon>
       </button>