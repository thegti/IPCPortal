<div class="horizontal-stepper-wrapper  myclass1">
  <h1 class="forhead" *ngIf="enableHead1">Member Registration</h1>
  <h1 class="forhead" *ngIf="enableHead2">Ministry Registration</h1>
  <mat-horizontal-stepper class="mat-elevation-z4 myclass1" [linear]="true">
    
     <mat-step [stepControl]="stprPrimary">
 
         <form fxLayout="column" [formGroup]="stprPrimary">
 
             <ng-template matStepLabel>Primary Information</ng-template>
             <br>
             <!-- <div fxFlex="1 0 auto" fxLayout="column"> -->
             <div fxFlex="1 0 auto" fxLayout="row"  class="formakingdynamic">
              <mat-form-field appearance="outline" fxFlex="100">
                          <mat-label  *ngIf="enableHead1">Member ID</mat-label>
                          <mat-label *ngIf="enableHead2">Ministry ID</mat-label>
                          <input matInput formControlName="ddlMemberId" required> 
                          <mat-error>ID is required!</mat-error>
              </mat-form-field>
              <mat-form-field  *ngIf="enableHead2" appearance="outline" fxFlex="100" class="for2field">
                      <mat-label>Member ID</mat-label>
                      <mat-select formControlName="ddlMemberId"  #singleSelect (selectionChange)="onMemberSelect()" required>
                              <ngx-mat-select-search [formControl]="memberFilterCtrl" [placeholderLabel]="'Search Member...'"  [noEntriesFoundLabel]="'No matching Member found'"></ngx-mat-select-search>
                              <mat-option *ngFor="let member of filteredMember | async" [value]="member['MMM_PK']">
                                {{member['MMM_NAME1'] + ' ' + member['MMM_NAME2'] + ' ' + member['MMM_NAME3'] }}
                              </mat-option>
                      </mat-select>
              </mat-form-field>
             
              <mat-form-field  appearance="outline" fxFlex="100" class="for2field">
                <mat-label>Title</mat-label>
                <mat-select  formControlName="ddlTitle"  reqired >
                    <ngx-mat-select-search [formControl]="titleFilterCtrl" [placeholderLabel]="'Search title...'"  [noEntriesFoundLabel]="'No matching Title found'"></ngx-mat-select-search>
       
                    <mat-option *ngFor="let config of filteredText | async" [value]="config['CFG_VALUE']">
                          {{config['CFG_DATA']}}
                  </mat-option>  
                </mat-select> 
                <mat-error>Select Title</mat-error>
              </mat-form-field>
              </div>
              <div fxFlex="1 0 auto" fxLayout="row" class="formakingdynamic">
              <mat-form-field appearance="outline" fxFlex="100">
                  <mat-label>First Name</mat-label>
                  <input matInput formControlName="txtFirstName" required>
              <mat-icon matSuffix class="disabled-text">account_circle</mat-icon> 
                  <mat-error>Name is required!</mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline" fxFlex="100" class="for2field">
              <mat-label>Middle Name</mat-label>
              <input matInput formControlName="txtMiddleName"> 
           </mat-form-field>
           </div>
           <div fxFlex="1 0 auto" fxLayout="row"  class="formakingdynamic">
              <mat-form-field appearance="outline" fxFlex="100">
                  <mat-label>Last Name</mat-label>
                  <input matInput formControlName="txtLastName"> 
             </mat-form-field>
            <mat-form-field appearance="outline" fxFlex="100" class="for2field">
              <mat-label>Mobile No.</mat-label>
              <input matInput formControlName="txtMobile" required>
         
              <mat-error>Invalid Mobile Number</mat-error>
            </mat-form-field>
            </div>
            <div fxFlex="1 0 auto" fxLayout="row"  class="formakingdynamic">
            <mat-form-field appearance="outline" fxFlex="100">
              <mat-label>Gender</mat-label>
              <mat-select  formControlName="ddlGender">
                  <mat-option *ngFor="let opt of genderopt" [value]="opt.value">
                  {{opt.gender}}
                </mat-option> 
              </mat-select> 
              <mat-error>Select Gender</mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline" fxFlex="100" class="for2field">
             <mat-label>DOB</mat-label>
             <input matInput type="date"  placeholder="MM/DD/YYYY" formControlName="txtDob"   required>
             <!-- <input matInput [matDatepicker]="picker" placeholder="MM/DD/YYYY" formControlName="dob"  >
             <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
             <mat-datepicker #picker ></mat-datepicker> -->
             <mat-error>
                Invalid date 
              </mat-error> 
           </mat-form-field>
           </div>
           <div fxFlex="1 0 auto" fxLayout="row"  class="formakingdynamic">
           <mat-form-field appearance="outline" fxFlex="100">
             <mat-label>Aadhar No/SSN No</mat-label>
             <input matInput formControlName="txtAadharNo"> 
             <mat-error>Invalid</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline" fxFlex="100" class="for2field" >
            <mat-label>Email</mat-label>
           <input matInput formControlName="txtEmail" > 
           <mat-error>Invalid email</mat-error>
          </mat-form-field>
          </div>
          <div class="forlabel formakingdynamic"><b class="labeldynamic">Address:</b></div>  
           <!-- <div formArrayName="address"> -->
             <!-- <div *ngFor="let item of getAddress.controls; let pointIndex=index" [formGroupName]="pointIndex">-->
                <div fxLayout="column"> 
               <div fxFlex="1 0 auto" fxLayout="row"  class="formakingdynamic">
                     <mat-form-field  appearance="outline" fxFlex="30">
                             <mat-label>House</mat-label>
                             <input matInput formControlName="txtHouse">
                             <mat-error>House is required!</mat-error>
                     </mat-form-field>
                     <mat-form-field  appearance="outline" fxFlex="70"  class="for2field">
                             <mat-label>Street Address</mat-label>
                             <input matInput formControlName="txtStreet">
                             <mat-error>Street address is required!</mat-error>
                     </mat-form-field>
               </div>
               <div fxFlex="1 0 auto" fxLayout="row"  class="formakingdynamic">     
                     <mat-form-field  appearance="outline" fxFlex="100">
                             <mat-label>City</mat-label>
                             <input matInput formControlName="txtCity">
                             <mat-error>City is required!</mat-error>
                     </mat-form-field>
                     <mat-form-field  appearance="outline" fxFlex="100"  class="for2field">
                             <mat-label>State</mat-label>
                             <input matInput formControlName="txtState">
                             <mat-error>State is required!</mat-error>
                     </mat-form-field>
                     <mat-form-field  appearance="outline" fxFlex="100"  class="for2field">
                             <mat-label>Country</mat-label>
                             <input matInput formControlName="ddlCountry">
                             <mat-error>country is required!</mat-error>
                     </mat-form-field>
               </div> 
             </div>      
               <!-- </div>
         </div> -->
        
        <div fxFlex="1 0 auto" fxLayout="row"  class="formakingdynamic">
            <img [src]="url" onError="this.src='assets/loginasset/images/display-img.jpg';" class="imgclass">
            <input type="file" #profilepic formControlName="photo"  style="display:none">
            <button mat-raised-button type="button" color="primary" class="forupload" (click)="profilepic.click()">Upload Photo</button>
            
        </div>
        
            <div fxLayout="row" fxLayoutAlign="center center">
         <button mat-raised-button matStepperNext type="button" [disabled]="stprPrimary.invalid" color="accent" >
             Next
         </button>
         <button mat-raised-button   class="forCancel"  color="accent">
          Cancel
        </button>
         </div>
         </form>
 
     </mat-step>
 
     <mat-step [stepControl]="stprSecondary">
 
         <form fxLayout="column" [formGroup]="stprSecondary">
 
             <ng-template matStepLabel>Secondary Information</ng-template>
             <div fxFlex="1 0 auto" fxLayout="row"  class="formakingdynamic">
                 <mat-form-field appearance="outline" fxFlex="100">
                     <mat-label>Father's Name</mat-label>
                     <input matInput formControlName="txtFatherName"> 
                     <mat-error>Name is required!</mat-error>
               </mat-form-field>
               <mat-form-field appearance="outline" fxFlex="100" class="for2field">
                 <mat-label>Mother's Name</mat-label>
                 <input matInput formControlName="txtMotherName">
            
                 <mat-error>Mothers Name is required</mat-error>
               </mat-form-field>
              </div> 
              <div fxFlex="1 0 auto" fxLayout="row"  class="formakingdynamic">
               <mat-form-field appearance="outline" fxFlex="100">
                 <mat-label>Marital Status</mat-label>
                 <mat-select  formControlName="ddlMaritalStatus">
                     <mat-option *ngFor="let type of martialtype" [value]="type.value">
                     {{type.status}}
                   </mat-option> 
                 </mat-select> 
                 <mat-error>Select Marital Status</mat-error>
               </mat-form-field>
               <mat-form-field appearance="outline" fxFlex="100" class="for2field">
                 <mat-label>Spouse Name</mat-label>
                 <input matInput formControlName="txtSpouseName"> 
                 <mat-error>Name is required!</mat-error>
           </mat-form-field>
           </div>
           <div fxFlex="1 0 auto" fxLayout="row"  class="formakingdynamic">
           <mat-form-field appearance="outline" fxFlex="30">
             <mat-label>No. of Children</mat-label>
             <input matInput formControlName="txtNoChildren" maxlength="1" pattern="[0-9]+" > 
             <mat-error>No. of children is required!</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline" fxFlex="100" class="for2field">
             <mat-label>Profession</mat-label>
             <input matInput formControlName="txtProfession"> 
             <mat-error>Profession is required!</mat-error>
         </mat-form-field>
         <mat-form-field appearance="outline" fxFlex="100" class="for2field">
           <mat-label>Blood Group</mat-label>
           <mat-select  formControlName="ddlBloodGroup">
                   <mat-option *ngFor="let blod of bldgrp" [value]="blod">
                   {{blod}}
                 </mat-option> 
                 
            </mat-select> 
           <mat-error>Blood Group is required</mat-error>       
          </mat-form-field>      
               </div>
             <div fxLayout="row" fxLayoutAlign="center center">
                 <button class="mr-8" mat-raised-button matStepperPrevious type="button" color="accent">
                     Previous
                 </button>
                 <button mat-raised-button matStepperNext type="button" color="accent">
                     Next
                 </button>
                 <button mat-raised-button   class="forCancel"  color="accent">
                  Cancel
                </button>
             </div>
             </form>
 
     </mat-step>
 
     <mat-step [stepControl]="stprTeritary">
 
         <form fxLayout="column" [formGroup]="stprTeritary">
 
             <ng-template matStepLabel>Official or Church Information</ng-template>
             <!-- <div fxFlex="1 0 auto" fxLayout="row">
              <mat-form-field appearance="outline" fxFlex="100">
                  <mat-label>Select Country</mat-label>
                  <mat-select formControlName="country"  #singleSelect (selectionChange)="testSelect()">
                    <ngx-mat-select-search [formControl]="testFilterCtrl" [placeholderLabel]="'Search Country...'"  [noEntriesFoundLabel]="'No matching Country found'"></ngx-mat-select-search>
                    <mat-option *ngFor="let country of filteredtest | async" [value]="country['CNT_PK']">
                      {{country['CNT_NAME']}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
             </div> -->
             <div fxFlex="1 0 auto" fxLayout="row"  class="formakingdynamic">

              
                <!-- <mat-form-field appearance="outline" fxFlex="100">
                    <mat-label>Select Country</mat-label>
                    <mat-select formControlName="ddlCountry"  #singleSelect (selectionChange)="onCountrySelect()">
                      <ngx-mat-select-search [formControl]="countryFilterCtrl" [placeholderLabel]="'Search Country...'"  [noEntriesFoundLabel]="'No matching Country found'"></ngx-mat-select-search>
                      <mat-option *ngFor="let country of filteredCount | async" [value]="country['CNT_PK']">
                        {{country['CNT_NAME']}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field> -->
           
                   <mat-form-field appearance="outline" fxFlex="100">
                      <mat-label>Select Country</mat-label>
                      <mat-select formControlName="ddlCountry"  #singleSelect >
                        <ngx-mat-select-search [formControl]="countryFilterCtrl" [placeholderLabel]="'Search Country...'"  [noEntriesFoundLabel]="'No matching Country found'"></ngx-mat-select-search>
                        <mat-option *ngFor="let country of filteredCount | async" [value]="country['CNT_PK']">
                          {{country['CNT_NAME']}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field appearance="outline" fxFlex="100" class="for2field">
                      <mat-label>Select Region</mat-label>
                      <mat-select formControlName="ddlRegion"    >
                        <ngx-mat-select-search [formControl]="regionFilterCtrl" [placeholderLabel]="'Search Region...'"  [noEntriesFoundLabel]="'No matching Region found'"></ngx-mat-select-search>
                        <mat-option *ngFor="let region of filteredRegion | async" [value]="region['RGN_PK']">
                          {{region['RGN_NAME']}}
                        </mat-option>
                      </mat-select>
                      <mat-error>Region is required</mat-error>
                    </mat-form-field>
                   </div>
                   <div fxFlex="1 0 auto" fxLayout="row"  class="formakingdynamic"> 
                          <mat-form-field appearance="outline" fxFlex="100" *ngIf="regionfieldset">
                                  <mat-label>Select Centre</mat-label>
                                  <mat-select formControlName="ddlCentre" (click)="checkCntryandRegselection()"  (selectionChange)="onCentreSelect()">
                                    <ngx-mat-select-search [formControl]="centreFilterCtrl" [placeholderLabel]="'Search Centre...'"  [noEntriesFoundLabel]="'No matching Centre found'"></ngx-mat-select-search>
                                    <mat-option *ngFor="let centre of filteredCentre | async" [value]="centre['CTR_PK']">
                                      {{centre['CTR_NAME']}}
                                    </mat-option>
                                  </mat-select>
                          </mat-form-field>
                          <mat-form-field appearance="outline" fxFlex="100" class="for2field">
                                  <mat-label>Select Church</mat-label>
                                  <mat-select formControlName="ddlChurch"   required>
                                    <ngx-mat-select-search [formControl]="churchFilterCtrl"  [placeholderLabel]="'Search Church...'"  [noEntriesFoundLabel]="'No matching Church found'"></ngx-mat-select-search>
                                    <mat-option *ngFor="let church of filteredChurch | async" [value]="church['CCH_PK']">
                                      {{church['CCH_NAME']}}
                                    </mat-option>
                                  </mat-select>
                            </mat-form-field>
                  </div>
             <div fxFlex="1 0 auto" fxLayout="row"  class="formakingdynamic">
                     <mat-form-field appearance="outline" fxFlex="100">
                             <mat-label>Enrollment Date</mat-label>
                             <input matInput type="date"  placeholder="MM/DD/YYYY" formControlName="txtEnrollmentDate"  >
                             <!-- <input matInput [matDatepicker]="picker1" formControlName="enrollmentdate">
                             <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                             <mat-datepicker #picker1></mat-datepicker> -->
                             <mat-error>select Enrollment Date</mat-error>
                     </mat-form-field>
                     <mat-form-field appearance="outline" fxFlex="100" class="for2field">
                             <mat-label>Membership Expiry Date</mat-label>
                             <input matInput type="date"  placeholder="MM/DD/YYYY" formControlName="txtmembershipexpirydate"  >
                             <!-- <input matInput [matDatepicker]="picker2" formControlName="mambershipexpirydate">
                             <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                             <mat-datepicker #picker2></mat-datepicker> -->
                             <mat-error>select Expiry Date</mat-error> 
                     </mat-form-field>
             </div> 
 
             <div fxLayout="row" fxLayoutAlign="center center">
                 <button class="mr-8" mat-raised-button matStepperPrevious type="button" color="primary">
                     Previous
                 </button>
                 <button mat-raised-button *ngIf="!enableclose" [disabled]="stprPrimary.invalid || stprSecondary.invalid || stprTeritary.invalid" (click)="register()"  color="accent">
                    Register
                 </button>
                 <button mat-raised-button   class="forCancel"  color="accent">
                  Cancel
                </button>
             </div>
 
         </form>
         
     </mat-step> 
 
   </mat-horizontal-stepper>  
 
 </div>  
 <button mat-icon-button class="warn mat-elevation-z2 theme-options-button"
     >
  <mat-icon>settings</mat-icon>
</button>
